!function(){"use strict";class t extends Laya.Script{constructor(){super(),this.isUp=!1,this.isDown=!1,this.timer=0,this.gamestart=!0}onAwake(){this.randomUp(),Laya.stage.on("gamestart",this,function(){this.gamestart=!0})}onUpdate(){this.gamestart&&(this.isUp&&(this.owner.transform.translate(new Laya.Vector3(0,.1,0)),this.owner.transform.localPosition.y>=2.5&&(this.isUp=!1,this.owner.transform.localPosition=new Laya.Vector3(0,2.5,0),Laya.stage.timerOnce(1e3,this,function(){this.isDown=!0})),this.timer=0),this.isDown&&(this.owner.transform.translate(new Laya.Vector3(0,-.1,0)),this.owner.transform.localPosition.y<=0&&(this.isDown=!1,this.owner.transform.localPosition=new Laya.Vector3,this.randomUp()),this.timer=0),0==this.isDown&&0==this.isUp&&(this.timer+=Laya.timer.delta,this.timer>=6e3&&(this.timer=0,this.isUp=!0)))}randomUp(){var t=Math.random();Laya.stage.timerOnce(6e3*t,this,function(){this.isUp=!0})}Knock(){this.owner.transform.localPosition=new Laya.Vector3,this.isUp=!1,this.isDown=!1}}class e extends Laya.Script{constructor(){super()}onAwake(){Laya.stage.timerOnce(2e3,this,function(){this.owner.destroy()})}}class a extends Laya.Script{constructor(){super()}Init(t,e,a){this.camera=t,this.scene=e,this.physicsSimulation=e.physicsSimulation,this.effect=a}onAwake(){this.ray=new Laya.Ray(new Laya.Vector3,new Laya.Vector3),this.hitResult=new Laya.HitResult,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.onDown),Laya.stage.on("GameOver",this,function(){this.isGameOver=!0}),Laya.stage.on("AgainGame",this,function(){this.isGameOver=!1}),this.sound=!0,Laya.stage.on("sound",this,function(t){this.sound=t}),this.gameStart=!1,Laya.stage.on("gamestart",this,function(){Laya.timer.once(100,this,function(){this.gameStart=!0})})}onDown(){this.isGameOver||0==this.gameStart||(this.camera.viewportPointToRay(new Laya.Vector2(Laya.stage.mouseX,Laya.stage.mouseY),this.ray),this.physicsSimulation.rayCast(this.ray,this.hitResult)&&this.hitResult.collider.owner.transform.localPosition.y>=2&&(this.targetPos=this.hitResult.collider.owner.transform.position,this.pos=this.hitResult.point,console.log(this.pos),this.targetPos.y=.35,this.owner.transform.position=new Laya.Vector3(this.targetPos.x,7,this.targetPos.z),Laya.Tween.to(this.owner.transform,{localPositionX:this.targetPos.x,localPositionY:this.targetPos.y,localPositionZ:this.targetPos.z},100,Laya.Ease.linearIn,Laya.Handler.create(this,function(){this.hitResult.collider.owner.getComponent(t).Knock();var a=Laya.Sprite3D.instantiate(this.effect,this.scene);a.transform.position=this.targetPos,a.addComponent(e),Laya.stage.event("AddScore",this.pos),this.sound&&Laya.SoundManager.playSound("https://dadishu.oss-cn-beijing.aliyuncs.com/hit.mp3"),Laya.Tween.to(this.owner.transform,{localPositionX:this.targetPos.x,localPositionY:7,localPositionZ:this.targetPos.z},100,Laya.Ease.linearIn,Laya.Handler.create(this,function(){}),0,!0)}),0,!0)))}}class s extends Laya.Script{constructor(){super(),this.txt_Time=null,this.txt_Score=null,this.gameoverPanel=null,this.gamestartPanel=null,this.gamepanel=null,this.overpanel=null,this.addscore=null,this.startBT=null,this.pauseBT=null,this.hscore=null,this.settingBT=null,this.soundBT=null,this.BGMBT=null,this.ExitBT=null,this.settingPanel=null,this.btn_Again=null}init(t){this.camera=t}onAwake(){this.pause=!1,this.hscore.text="Highest:"+Laya.LocalStorage.getItem("hscore"),this.settingBT.on(Laya.Event.CLICK,this,function(){this.settingPanel.visible=!0}),this.ExitBT.on(Laya.Event.CLICK,this,function(){this.settingPanel.visible=!1}),this.BGMBT.on(Laya.Event.CLICK,this,function(){Laya.stage.event("bgm",this.BGMBT.selected)}),this.soundBT.on(Laya.Event.CLICK,this,function(){Laya.stage.event("sound",this.soundBT.selected)}),this.pauseBT.on(Laya.Event.CLICK,this,function(){this.pause?(Laya.timer.scale=1,this.pause=!1,this.pauseBT.skin="comp/pause2.png",Laya.stage.event("pause",this.pause)):(Laya.timer.scale=0,this.pause=!0,this.pauseBT.skin="comp/pause1.png",Laya.stage.event("pause",this.pause))}),this.pos1=new Laya.Vector3,this.btn_Again.on(Laya.Event.CLICK,this,this.againGame),this.score=0,this.timer=0,this.time=20,Laya.stage.on("AddScore",this,this.addScore),this.gamepanel.visible=!1,this.overpanel.visible=!1,this.gamestartPanel.visible=!0,this.gamestart=!1,this.startBT.on(Laya.Event.CLICK,this,function(){Laya.stage.event("gamestart")}),Laya.stage.on("gamestart",this,function(){this.gamepanel.visible=!0,this.gamestartPanel.visible=!1,this.gamestart=!0})}addScore(t){this.score++,this.txt_Score.text="Score:"+this.score,Laya.Node;var e=Laya.Pool.getItemByCreateFun("addscore",function(){return this.addscore.create()},this);Laya.stage.addChild(e),this.camera.worldToViewportPoint(t,this.pos1),e.pos(this.pos1.x,this.pos1.y),Laya.Tween.to(e,{y:this.pos1.y-100},300,Laya.Ease.backIn,Laya.Handler.create(this,function(){e.removeSelf(),Laya.Pool.recover("addscore",e)}),100)}onUpdate(){this.gamestart&&(this.time<=0&&this.gameover(),this.timer+=Laya.timer.delta/1e3,this.timer>=1&&(this.timer=0,this.time--,this.txt_Time.text="Time:"+this.time+"s"))}gameover(){this.txt_Score.visible=!1,this.txt_Time.visible=!1,this.overpanel.visible=!0,Laya.stage.event("GameOver"),Laya.LocalStorage.setItem("hscore",this.score)}againGame(){this.hscore.text="Highest:"+Laya.LocalStorage.getItem("hscore"),this.txt_Score.visible=!0,this.txt_Time.visible=!0,this.overpanel.visible=!1,this.timer=0,this.time=20,this.txt_Time.text="Time:"+this.time+"s",this.score=0,this.txt_Score.text="Score:"+this.score,Laya.stage.event("AgainGame")}}class i extends Laya.Script{constructor(){super()}onAwake(){Laya.Scene3D.load("res/scene/LayaScene_Main/Conventional/Main.ls",Laya.Handler.create(this,this.onLoadSceneFinish))}onLoadSceneFinish(e){this.bgm=Laya.SoundManager.playMusic("https://dadishu.oss-cn-beijing.aliyuncs.com/bgm.mp3",0),this.bgm.volume=0,Laya.stage.on("gamestart",this,function(){this.bgm.volume=.4}),Laya.stage.on("bgm",this,function(t){this.bgm.volume=t?.4:0}),Laya.stage.on("pause",this,function(t){t?(this.bgm.pause(),console.log(8888)):(this.bgm.resume(),console.log(7777))}),e.zOrder=-1,Laya.stage.addChild(e);for(var i=e.getChildByName("Moles"),n=0;n<i.numChildren;n++)i.getChildAt(n).getChildAt(0).addComponent(t);var o=e.getChildByName("Explosion"),r=Laya.Sprite3D.instantiate(o);o.active=!1;var h=e.getChildByName("Main Camera");e.getChildByName("Hummer").addComponent(a).Init(h,e,r),this.owner.getComponent(s).init(h)}}class n{static init(){let t=Laya.ClassUtils.regClass;t("scripts/GameRoot.js",i),t("scripts/UICtrl.js",s)}}n.width=1920,n.height=1080,n.scaleMode="showall",n.screenMode="horizontal",n.alignV="middle",n.alignH="center",n.startScene="GameRoot.scene",n.sceneRoot="",n.debug=!1,n.stat=!1,n.physicsDebug=!1,n.exportSceneToJson=!0,n.init();new class{constructor(){window.Laya3D?Laya3D.init(n.width,n.height):Laya.init(n.width,n.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=n.scaleMode,Laya.stage.screenMode=n.screenMode,Laya.stage.alignV=n.alignV,Laya.stage.alignH=n.alignH,Laya.URL.exportSceneToJson=n.exportSceneToJson,(n.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),n.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),n.stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){n.startScene&&Laya.Scene.open(n.startScene)}}}();